document.addEventListener("DOMContentLoaded",function(){var e=[].slice.call(document.querySelectorAll("video.lazy"));if("IntersectionObserver"in window){var t=new IntersectionObserver(function(e,o){e.forEach(function(e){if(e.isIntersecting){for(var o in e.target.children){var r=e.target.children[o];"string"==typeof r.tagName&&"SOURCE"===r.tagName&&(r.src=r.dataset.src)}e.target.load(),e.target.classList.remove("lazy"),t.unobserve(e.target)}})});e.forEach(function(e){t.observe(e)})}window.innerWidth<=1260&&(document.querySelector(".header__bottom").prepend(document.querySelector(".preview__social")),document.querySelector(".header__bottom").prepend(document.querySelector(".header__tel"))),document.querySelectorAll('a[href*="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const o=e.getAttribute("href").substr(1);document.getElementById(o).scrollIntoView({behavior:"smooth",block:"start"})})});new Swiper(".founder-slider",{slidesPerView:1,spaceBetween:0,breakpoints:{640:{slidesPerView:3,spaceBetween:30}},pagination:{el:".swiper-pagination",type:"bullets",clickable:!0}}),new Swiper(".reviews__swiper",{effect:"coverflow",centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:0,stretch:-10,depth:0,modifier:1,slideShadows:!1,scale:.9},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});document.querySelector(".reviews__content .swiper-button-next").addEventListener("click",()=>{if(document.querySelector(".reviews__content .swiper-slide-prev")){let e=document.querySelector(".reviews__content .swiper-slide-prev .swiper-video");e.pause(),e.currentTime=0}document.querySelector(".reviews__play").style.opacity=1}),document.querySelector(".reviews__content .swiper-button-next div").addEventListener("click",()=>{if(document.querySelector(".reviews__content .swiper-slide-prev")){let e=document.querySelector(".reviews__content .swiper-slide-prev .swiper-video");e.pause(),e.currentTime=0}document.querySelector(".reviews__play").style.opacity=1}),document.querySelector(".reviews__content .swiper-button-prev").addEventListener("click",()=>{if(document.querySelector(".reviews__content .swiper-slide-next .swiper-video")){let e=document.querySelector(".reviews__content .swiper-slide-next .swiper-video");e.pause(),e.currentTime=0}document.querySelector(".reviews__play").style.opacity=1}),document.querySelector(".reviews__content .swiper-button-prev div").addEventListener("click",()=>{if(document.querySelector(".reviews__content .swiper-slide-next .swiper-video")){let e=document.querySelector(".reviews__content .swiper-slide-next .swiper-video");e.pause(),e.currentTime=0}document.querySelector(".reviews__play").style.opacity=1}),document.querySelector(".reviews__play").addEventListener("click",()=>{let e=document.querySelector(".swiper-slide-active .swiper-video");document.querySelector(".reviews__play").style.opacity=0,e.paused?e.play():(e.pause(),document.querySelector(".reviews__play").style.opacity=1)}),document.querySelector(".swiper-border").addEventListener("click",()=>{let e=document.querySelector(".swiper-slide-active .swiper-video");document.querySelector(".reviews__play").style.opacity=1,e.pause()});new Swiper(".cases__swiper",{slidesPerView:1,spaceBetween:10,simulateTouch:0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},allowTouchMove:!1,breakpoints:{1232:{slidesPerView:3,spaceBetween:30},992:{slidesPerView:2,spaceBetween:30}},pagination:{el:".swiper-pagination",type:"bullets",clickable:!0}});if(document.querySelectorAll(".faq__item").forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("faq__item-active")})}),document.documentElement.clientWidth<480||document.documentElement.clientHeight<620)document.querySelector(".learn__videos").remove();else{const e=document.querySelectorAll(".learn__videos-border .video");for(let t=1;t<e.length+1;t++)window.addEventListener("scroll",function(){if(document.documentElement.clientWidth>=480||document.documentElement.clientHeight>=620){const e=document.documentElement.clientHeight,o=window.pageYOffset,r=(e-document.querySelector(".learn__videos-border .video").offsetHeight)/2;let n=document.querySelector(`#learnItem${t}`),c=document.querySelector(`#video${t}`).parentNode,l=e+o-(n.getBoundingClientRect().top+o)-r+50;c.style.height=t>=2?l>0?`${l}px`:"0px":"100%"}})}document.querySelector(".header__burger").addEventListener("click",()=>{document.querySelector(".header__burger").classList.toggle("active__burger"),document.querySelector(".header__menu").classList.toggle("show"),document.querySelector(".header").classList.toggle("header__show"),document.body.classList.toggle("overflow")}),document.querySelectorAll(".header__menu-link a").forEach(e=>{e.addEventListener("click",()=>{window.innerWidth<1232&&(document.querySelector(".header__burger").classList.toggle("active__burger"),document.querySelector(".header__menu").classList.toggle("show"),document.querySelector(".header").classList.toggle("header__show"),document.body.classList.toggle("overflow"))})});let o;window.addEventListener("DOMContentLoaded",function(){[].forEach.call(document.querySelectorAll(".tel"),function(e){var t;function o(e){e.keyCode&&(t=e.keyCode),this.selectionStart<3&&e.preventDefault();var o="+7 (___) ___ ____",r=0,n=o.replace(/\D/g,""),c=this.value.replace(/\D/g,""),l=o.replace(/[_\d]/g,function(e){return r<c.length?c.charAt(r++)||n.charAt(r):e});-1!=(r=l.indexOf("_"))&&(r<5&&(r=3),l=l.slice(0,r));var i=o.substr(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");(!(i=new RegExp("^"+i+"$")).test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=l),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",o,!1),e.addEventListener("focus",o,!1),e.addEventListener("blur",o,!1),e.addEventListener("keydown",o,!1)})});let r="";document.querySelectorAll(".btn-modal").forEach(e=>{e.addEventListener("click",t=>{document.querySelector(".popup__btn span").textContent=e.querySelector("span").textContent,document.querySelector(".popup__btn button").textContent=e.querySelector("span").textContent,o="Стать мастером"==e.lastElementChild.textContent?()=>{ym(91902724,"reachGoal","form_sub_main_01")}:"Подать заявку"==e.lastElementChild.textContent?()=>{ym(91902724,"reachGoal","form_sub_main_02")}:"Получить видеоурок"==e.lastElementChild.textContent?()=>{ym(91902724,"reachGoal","form_sub_main_03")}:"Купить"==e.lastElementChild.textContent?()=>{ym(91902724,"reachGoal","form_sub_main_04")}:()=>{},document.querySelector(".popup").classList.toggle("popup__active"),document.body.classList.toggle("overflow"),r=e.lastElementChild.textContent})}),document.querySelectorAll(".popup__close").forEach(e=>{e.addEventListener("click",()=>{document.querySelector(".popup").classList.toggle("popup__active"),document.body.classList.toggle("overflow")})});const n=async(e,t)=>{const o=await fetch(e,{method:"POST",headers:{"Content-type":"application/json"},body:t});return await o.json()},c=document.createElement("div");var l;(l=document.querySelector(".popup__form")).addEventListener("submit",e=>{c.remove(),e.preventDefault();const t=new FormData(l),i=Object.fromEntries(t.entries());if(t.forEach((e,t)=>{i[t]=e}),i.tel.length<17)return c.textContent="Введите номер телефона!",void document.querySelector(".popup__btn").after(c);i.message=r,17==i.tel.length&&i.name.length>1&&n("/telegram.php",JSON.stringify(i)).then(e=>{document.querySelector(".popup__answer").classList.toggle("show"),document.querySelector(".popup__form").classList.toggle("show"),o()}).catch(e=>{c.textContent="Проверьте соединение с интернетом, и повторите попытку!",document.querySelector(".popup__btn").after(c)})}),window.addEventListener("scroll",()=>{window.pageYOffset>15?document.querySelector("header").classList.add("active"):document.querySelector("header").classList.remove("active")}),window.pageYOffset>15?document.querySelector("header").classList.add("active"):document.querySelector("header").classList.remove("active")});const cases=document.querySelectorAll(".case");cases.forEach(e=>{const t=e.querySelector(".case__before"),o=e.querySelector(".case__before-img"),r=e.querySelector(".case__change");let n=!1;document.addEventListener("DOMContentLoaded",()=>{let t=e.offsetWidth;o.style.width=`${t}px`});const c=o=>{let n=Math.max(0,Math.min(o,e.offsetWidth));t.style.width=`${n}px`,r.style.left=`${n}px`},l=e=>(e.stopPropagation(),e.preventDefault(),!1);window.innerWidth>=1260?(document.body.addEventListener("mouseup",()=>{n=!1}),e.addEventListener("mousedown",t=>{n=!0;let o=t.pageX;o-=e.getBoundingClientRect().left,c(o),l(t)}),document.body.addEventListener("mousemove",t=>{if(!n)return;let o=t.pageX;o-=e.getBoundingClientRect().left,c(o),l(t)})):(document.body.addEventListener("touchend",e=>{n=!1}),document.body.addEventListener("touchstart",t=>{if("case__after-img"==t.target.className||"case__before-img"==t.target.className||"chance"==t.target.alt){n=!0;let o=t.targetTouches[0].pageX;o-=e.getBoundingClientRect().left,c(o),t.stopPropagation()}}),document.body.addEventListener("touchmove",t=>{if(!n)return;let o=t.targetTouches[0].pageX;o-=e.getBoundingClientRect().left,c(o),t.stopPropagation()})),document.querySelector(".popup__btn").classList.add("disable"),document.querySelector("#name").addEventListener("input",()=>{document.querySelector("#name").value.length>1&&17==document.querySelector("#tel").value.length?document.querySelector(".popup__btn").classList.remove("disable"):document.querySelector(".popup__btn").classList.add("disable")}),document.querySelector("#tel").addEventListener("input",()=>{document.querySelector("#name").value.length>1&&17==document.querySelector("#tel").value.length?document.querySelector(".popup__btn").classList.remove("disable"):document.querySelector(".popup__btn").classList.add("disable")})});